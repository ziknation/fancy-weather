!function(e){var t={};function a(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=0)}([function(e,t,a){"use strict";a.r(t);a(1);var n={coordinates:{latitude:"",longitude:""},place:{en:{country:"",city:""},ru:{country:"",city:""}},weather:{current:{sky:"",temperature:"",feelsLike:"",wind:"",humidity:""},day1:{sky:"",temperature:""},day2:{sky:"",temperature:""},day3:{sky:"",temperature:""}},isButtonClick:!1,isFahrenheit:!1,language:"en",isLanguageChange:!1};var r={en:{search:"SEARCH",currentInformation:{feels:"Feels like: ",wind:"Wind: ",humidity:"Humidity: ",speedUnit:"m/s"},coordinates:{latitude:"Latitude: ",longitude:"Longitude: "},weather:{clearday:"Clear",clearnight:"Clear",cloudy:"Cloudy",fog:"Fog",hail:"Hail",partlycloudyday:"Partly cloudy",partlycloudynight:"Partly cloudy",rain:"Rain",sleet:"Sleet",snow:"Snow",thunderstorm:"Thunderstorm",tornado:"Tornado",weather:"Weather",wind:"Wind"},weekDays:{Mon:"Monday",Tue:"Tuesday",Wed:"Wednesday",Thu:"Thursday",Fri:"Friday",Sat:"Saturday",Sun:"Sunday"},months:{Jan:"January",Feb:"February",Mar:"March",Apr:"April",May:"May",Jun:"June",Jul:"July",Aug:"August",Sep:"September",Oct:"October",Nov:"November",Dec:"December"}},ru:{search:"ПОИСК",currentInformation:{feels:"Ощущается: ",wind:"Ветер: ",humidity:"Влажность: ",speedUnit:"м/с"},coordinates:{latitude:"Широта: ",longitude:"Долгота: "},weather:{clearday:"Ясно",clearnight:"Ясно",cloudy:"Облачно",fog:"Туман",hail:"Град",partlycloudyday:"Частично облачно",partlycloudynight:"Частично облачно",rain:"Дождь",sleet:"Мокрый снег",snow:"Снег",thunderstorm:"Гроза",tornado:"Торнадо",weather:"Погода",wind:"Ветренно"},weekDays:{Mon:"Понедельник",Tue:"Вторник",Wed:"Среда",Thu:"Четверг",Fri:"Пятница",Sat:"Суббота",Sun:"Воскресенье"},months:{Jan:"Январь",Feb:"Февраль",Mar:"Март",Apr:"Апрель",May:"Май",Jun:"Июнь",Jul:"Июль",Aug:"Август",Sep:"Сентябрь",Oct:"Октябрь",Nov:"Ноябрь",Dec:"Декабрь"}}};function o(){const e=document.querySelectorAll(".forecast--next_days")[0].childNodes,t=new Date,a=new Date(t.getFullYear(),t.getMonth(),t.getDate()+1),o=new Date(a.getFullYear(),a.getMonth(),a.getDate()+1),i=new Date(o.getFullYear(),o.getMonth(),o.getDate()+1);e[1].childNodes[1].innerHTML=r[n.language].weekDays[a.toDateString().split(" ")[0]],e[3].childNodes[1].innerHTML=r[n.language].weekDays[o.toDateString().split(" ")[0]],e[5].childNodes[1].innerHTML=r[n.language].weekDays[i.toDateString().split(" ")[0]]}function i(e,t){"fog"==e||"wind"==e?t.classList.add("scale_class"):t.classList.remove("scale_class")}function s(e){document.querySelectorAll(".location--coordinates")[0].innerHTML=`${r[e.language].coordinates.latitude}\n  ${e.coordinates.latitude} <br>\n  ${r[e.language].coordinates.longitude}\n  ${e.coordinates.longitude}`}function c(e){const t=document.querySelectorAll(".forecast--general_information-text-place")[0],a=document.querySelectorAll(".forecast--main_information-temperature")[0],n=document.querySelectorAll(".forecast--main_information-addition")[0];t.innerHTML=e.place[e.language].city+", "+e.place[e.language].country,a.innerHTML=e.weather.current.temperature+'<span class="forecast--main_information-temperature-span">&deg;</span>',n.innerHTML=`${r[e.language].weather[e.weather.current.sky]} <br>\n  ${r[e.language].currentInformation.feels}\n  ${e.weather.current.feelsLike} &deg;<br>\n  ${r[e.language].currentInformation.wind}\n  ${e.weather.current.wind} \n  ${r[e.language].currentInformation.speedUnit} <br>\n  ${r[e.language].currentInformation.humidity}\n  ${e.weather.current.humidity} %`}function d(e){const t=e.coordinates.latitude,a=e.coordinates.longitude;ymaps.ready((function(){new ymaps.Map("map",{center:[t,a],zoom:10,controls:["trafficControl","typeSelector","fullscreenControl"]})}))}function u(e){const t=document.querySelectorAll(".day_1_temp")[0],a=document.querySelectorAll(".day_2_temp")[0],n=document.querySelectorAll(".day_3_temp")[0];t.innerHTML=e.weather.day1.temperature+"&deg;",a.innerHTML=e.weather.day2.temperature+"&deg;",n.innerHTML=e.weather.day3.temperature+"&deg;"}async function l(){const e=`https://api.unsplash.com/photos/random?query=${n.place.ru.city}+${n.place.ru.country}+building&client_id=Wj1_S2mQuPhA1I5Eg9Xgz1wUnlGiPmBuGgp-bp6l0Qs`,t=await fetch(e),a=await t.json();document.body.style=`\n  background:linear-gradient(rgba(255,255,255,0.1), rgba(0,0,0,0.5)),url(${a.urls.regular});\n  background-repeat: no-repeat;\n  background-size: cover;\n  background-attachment: fixed;\n  background-position: top;\n  font-family: Montserrat;\n  `}async function y(e){c(e),s(e),function(e){const t=document.querySelectorAll(".forecast--img")[0],a=document.querySelectorAll(".day_1_img")[0],n=document.querySelectorAll(".day_2_img")[0],r=document.querySelectorAll(".day_3_img")[0];t.src=`./src/img/animated/${e.weather.current.sky}.svg`,t.alt=e.weather.current.sky,i(e.weather.current.sky,t),a.src=`./src/img/animated/${e.weather.day1.sky}.svg`,a.alt=e.weather.day1.sky,i(e.weather.day1.sky,a),n.src=`./src/img/animated/${e.weather.day2.sky}.svg`,n.alt=e.weather.day2.sky,i(e.weather.day2.sky,n),r.src=`./src/img/animated/${e.weather.day3.sky}.svg`,r.alt=e.weather.day3.sky,i(e.weather.day3.sky,r)}(e),o(),u(e),e.isButtonClick||e.isLanguageChange?(document.querySelector("#map").innerHTML="",d(e)):d(e),l()}var p=async function(e){const t=`https://api.darksky.net/forecast/045626b11a3f1e3d0a24b85fae2e7635/${e.coordinates.latitude},${e.coordinates.longitude}?units=si`,a=await fetch("https://evening-basin-27448.herokuapp.com/"+t);!function(e,t){t.weather.current.sky=e.currently.icon.split("-").join(""),t.weather.current.wind=Math.round(e.currently.windSpeed),t.weather.current.humidity=(100*e.currently.humidity).toString().slice(0,3),t.weather.day1.sky=e.daily.data[1].icon.split("-").join(""),t.weather.day2.sky=e.daily.data[2].icon.split("-").join(""),t.weather.day3.sky=e.daily.data[3].icon.split("-").join(""),t.isFahrenheit?(t.weather.current.temperature=Math.round(1.8*e.currently.temperature+32),t.weather.current.feelsLike=Math.round(1.8*e.currently.apparentTemperature+32),t.weather.day1.temperature=Math.round((e.daily.data[1].temperatureHigh+e.daily.data[1].temperatureLow)/2*1.8+32),t.weather.day2.temperature=Math.round((e.daily.data[2].temperatureHigh+e.daily.data[2].temperatureLow)/2*1.8+32),t.weather.day3.temperature=Math.round((e.daily.data[3].temperatureHigh+e.daily.data[3].temperatureLow)/2*1.8+32),y(t)):(t.weather.current.temperature=Math.round(e.currently.temperature),t.weather.current.feelsLike=Math.round(e.currently.apparentTemperature),t.weather.day1.temperature=Math.round((e.daily.data[1].temperatureHigh+e.daily.data[1].temperatureLow)/2),t.weather.day2.temperature=Math.round((e.daily.data[2].temperatureHigh+e.daily.data[2].temperatureLow)/2),t.weather.day3.temperature=Math.round((e.daily.data[3].temperatureHigh+e.daily.data[3].temperatureLow)/2),y(t))}(await a.json(),e)};var m=async function(e){if(e.isButtonClick){const t=document.querySelector(".search--text").value,a="e42603ebcd574a43819b2249318b655a",n=`https://api.opencagedata.com/geocode/v1/json?q=${t}&key=${a}&language=en`,r=await fetch(n),o=await r.json();e.coordinates.latitude=o.results[0].geometry.lat.toFixed(4),e.coordinates.longitude=o.results[0].geometry.lng.toFixed(4),e.place.en.country=o.results[0].components.country,e.place.en.city=o.results[0].formatted.split(",")[0].split(" ")[0];const i=`https://api.opencagedata.com/geocode/v1/json?q=${t}&key=${a}&language=ru`,s=await fetch(i),c=await s.json();e.place.ru.country=c.results[0].components.country,e.place.ru.city=c.results[0].formatted.split(",")[0].split(" ")[0],p(e)}else{const t="e42603ebcd574a43819b2249318b655a",a="https://api.opencagedata.com/geocode/v1/json",n=e.coordinates.latitude,r=e.coordinates.longitude;let o=`${a}?&q=${n}+${r}&key=${t}&language=en`,i=await fetch(o),s=await i.json();e.place.en.country=s.results[0].components.country,e.place.en.city=s.results[0].components.city;let c=`${a}?&q=${n}+${r}&key=${t}&language=ru`,d=await fetch(c),u=await d.json();e.place.ru.country=u.results[0].components.country,e.place.ru.city=u.results[0].components.city,p(e)}};var g=async function(){const e=(await fetch("https://ipinfo.io/json?token=680fc6f5c1667a").then(e=>e.json())).loc.split(",");n.coordinates.latitude=e[0],n.coordinates.longitude=e[1],m(n)};function h(){""!=document.querySelector(".search--text").value?(n.isButtonClick=!0,m(n)):alert("Сначала введите название города")}document.body.insertAdjacentHTML("afterbegin",'<header>\n<div class="wrapper">\n  <div class="controls">\n    <div class="controls--refresh"><img src="./src/img/refreshFront.png" alt="refreshFront"></div>\n    <select class="controls--language">\n      <option value="en">EN</option>\n      <option value="ru">RU</option>\n    </select>\n    <div class="controls--units">\n      <p class="controls--units-fahrenheit">F</p>\n      <p class="controls--units-celsius selected_unit">C</p>\n    </div>        \n  </div>\n  <div class="search">\n    <input type="text" class="search--text">\n    <button class="search--button">SEARCH</button>\n  </div>\n</div>\n</header>\n\n<main>\n<div class="forecast">\n  <div class="forecast--general_information">\n    <div class="forecast--general_information-text">\n      <p class="forecast--general_information-text-place"></p>\n      <p class="forecast--general_information-text-date">Mon 28 October 17:23</p>\n    </div>\n  </div>\n  <img src="" alt="weatherSVG" class="forecast--img">\n  <div class="forecast--main_information">\n    <p class="forecast--main_information-temperature"><p>\n    <p class="forecast--main_information-addition"></p>\n  </div>\n  <div class="forecast--next_days">\n    <div class="forecast--next_days-first">\n      <p class="forecast--next_days-first-day"></p>\n      <div class="next_days_wrapper">\n        <div class="forecast--next_days-first-icon next_days_icon">\n          <p class="day_1_temp">7&deg;</p>\n        </div>\n        <img src="" alt="weatherSVG" class="next_days_img day_1_img">\n      </div>\n    </div>\n    <div class="forecast--next_days-second">\n      <p class="forecast--next_days-second-day">Wednesday</p>\n      <div class="next_days_wrapper">\n        <div class="forecast--next_days-second-icon next_days_icon">\n          <p class="day_2_temp">7&deg;</p>\n        </div>\n        <img src="" alt="weatherSVG" class="next_days_img day_2_img">\n      </div>\n    </div>\n    <div class="forecast--next_days-third">\n      <p class="forecast--next_days-third-day">Thursday</p>\n      <div class="next_days_wrapper">\n        <div class="forecast--next_days-third-icon next_days_icon">\n          <p class="day_3_temp">7&deg;</p>\n        </div>\n        <img src="" alt="weatherSVG" class="next_days_img day_3_img">\n      </div>\n    </div>\n  </div>\n</div>\n<div class="location">\n  <div id="map" class="location--map"></div>\n  <div class="location--coordinates"></div>\n</div>\n</main>');setInterval((function(){const e=new Date;let t=document.querySelectorAll(".forecast--general_information-text-date")[0],a=r[n.language].weekDays[e.toDateString().split(" ")[0]],o=e.getDate(),i=r[n.language].months[e.toDateString().split(" ")[1]],s=e.getHours(),c=e.getMinutes()<=9?"0"+e.getMinutes():e.getMinutes();t.innerHTML=`${a} ${o} ${i}\n  ${s}:${c}`}),1e3);g(),document.querySelectorAll(".search--button")[0].addEventListener("click",h),document.addEventListener("keypress",(function(e){13===e.keyCode&&h()})),document.querySelector(".controls--units").addEventListener("click",(function(e){var t;"F"===e.target.innerHTML&&0==n.isFahrenheit?(e.target.classList.add("selected_unit"),e.target.nextElementSibling.classList.remove("selected_unit"),n.isFahrenheit=!0,(t=n).weather.current.temperature=Math.round(1.8*t.weather.current.temperature+32),t.weather.current.feelsLike=Math.round(1.8*t.weather.current.feelsLike+32),t.weather.day1.temperature=Math.round(1.8*t.weather.day1.temperature+32),t.weather.day2.temperature=Math.round(1.8*t.weather.day2.temperature+32),t.weather.day3.temperature=Math.round(1.8*t.weather.day3.temperature+32),c(t),u(t)):"C"===e.target.innerHTML&&1==n.isFahrenheit&&(e.target.classList.add("selected_unit"),e.target.previousElementSibling.classList.remove("selected_unit"),n.isFahrenheit=!1,function(e){e.weather.current.temperature=Math.round((e.weather.current.temperature-32)/1.8),e.weather.current.feelsLike=Math.round((e.weather.current.feelsLike-32)/1.8),e.weather.day1.temperature=Math.round((e.weather.day1.temperature-32)/1.8),e.weather.day2.temperature=Math.round((e.weather.day2.temperature-32)/1.8),e.weather.day3.temperature=Math.round((e.weather.day3.temperature-32)/1.8),c(e),u(e)}(n))})),document.querySelector(".controls--language").addEventListener("change",(function(e){var t;n.language=e.target.value,n.isLanguageChange=!0,t=n.language,document.querySelector(".search--button").innerHTML=r[t].search,c(n),s(n),o()})),document.querySelector(".controls--refresh").addEventListener("click",l)},function(e,t){}]);